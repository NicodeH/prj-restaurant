<form #formulaire="ngForm" (ngSubmit)="onSubmit(formulaire)">
  <fieldset>
    <br>
    <h3>{{menu.id ? "Modifier menu" : "Nouveau menu"}}</h3>
    <div>
      <label for="nom" class="form-label mt-4">Nom</label>
      <input ngModel [(ngModel)]="menu.nom" type="text" name="nom" id="nom" class="form-control" required maxlength="50" minlength="3">
    </div>
    <div>
      <label for="etat" class="form-label mt-4">Statut</label>
      <select ngModel [(ngModel)]="menu.statut" name="statut" id="statut" class="form-select" required>
        <option></option>
        <option value="actif">Actif</option>
        <option value="inactif">Inactif</option>
      </select>
    </div>
    <div>
      <label for="description" class="form-label mt-4">Description</label>
      <textarea ngModel [(ngModel)]="menu.description" name="description" id="description" cols="30" rows="3" class="form-control" maxlength="256"></textarea>
    </div>

  <div class="d-flex btn-group mt-2">
    <button class="btn btn-success" type="submit" [disabled]="!formulaire.valid">
      {{menu.id ? 'Modifier' : 'Créer'}}
    </button>
    <a routerLink="/menus" class="btn btn-warning">
      Annuler
    </a>
  </div>
  </fieldset>

  <div *ngIf="menu.id !== 0">
    <div class="form-group" *ngIf="(plats | async) as listePlats">
      <br>
      <h2> <b>{{listePlats.length}}</b> plats enregistrées</h2>
      <ul class="list-group">

        <app-plat-item
            *ngFor="let plat of listePlats"
            [plat]="plat">
        </app-plat-item>
        <br>
        <button [routerLink]="['/menu', menu.id, 'plat', 'new']" type="button" class="btn btn-primary">Nouveau plat</button>
        <br><br>
      </ul>
    </div>
  </div>
</form>
